<!DOCTYPE html>
<html class="full-height" lang="en">

<head>
    <meta charset="utf-8">
    <link rel="shortcut icon" type="image/png" href="img/favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>AWESOM-O // Commands</title>
    <!-- Font Awesome-->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- Bootstrap core CSS-->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- Material Design Bootstrap-->
    <link href="css/mdb.min.css" rel="stylesheet">
    <!-- Template styles-->
    <style>
        /* TEMPLATE STYLES */
        /* *{
            border-color: red;
            border-width: 1px;
            border-style: dashed;
        } */

        .undef {
            font-family: "Comic Sans MS";
        }

        .flex-center {
            color: #fff;
        }

        .intro-1 {
            background: url("img/awesomo-bg.jpg")no-repeat center center;
            background-size: cover;
        }

        .navbar .btn-group .dropdown-menu a:hover {
            color: #000 !important;
        }

        .navbar .btn-group .dropdown-menu a:active {
            color: #fff !important;
        }

        .role-hm {
            color: #2ecc71;
        }
        .role-p {
            color: #F1C40F;
        }

    </style>
</head>

<body>
    <header>
        <!-- Navbar-->
        <% include partials/navbar %>
            <!-- /.Navbar-->
            <!-- Intro Section-->

            <!-- Main container-->
            <div class="container">
                <div class="divider-new pt-5">
                    <h2 class="h2-responsive wow fadeIn" data-wow-delay="0.2s">Commands</h2>
                </div>
                <!-- Section: Status Cards-->
                <section id="status">

                </section>
                <!--Table-->
                <table class="table table-hover">
                    <thead class="indigo wow fadeIn" data-wow-delay="0.4s">
                        <tr style="color:white">
                            <th>Name</th>
                            <th>Desc</th>
                            <th>Usage</th>
                            <th>Role</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% var i = 0.5; %>
                        <% commands.forEach(function(command) { %>

                            <% var tablecss; %>
                            <% if (command.disabled) { %>
                                <% tablecss = "table-danger"; %>
                            <% } else { %>
                                <% tablecss = ""; %>
                            <% } %>

                            <tr class="wow fadeIn <%= tablecss %>" data-wow-delay="<%= i %>s">
                                <th scope="row"><%= command.name %></th>
                                <td><%= command.desc %></td>
                                <td><%= command.usage %></td>

                                <% var rolestr = ""; %>
                                <% for (var j = 0; j < command.roles.length; j++) { %>
                                    <% rolestr += command.roles[j]; %>
                                <% } %>
                                
                                <% var rolecss; %>
                                <% if (rolestr.indexOf("@Hallway Monitors") != -1) { %>
                                    <% rolecss = "role-hm"; %>
                                <% } else if (rolestr.indexOf("@Patrons") != -1) { %>
                                    <% rolecss = "role-p"; %>
                                <% } else { %>
                                    <% rolecss = ""; %>
                                <% } %>

                                <td class="font-weight-bold <%= rolecss %>"><%= rolestr %></td>
                            </tr>

                            <% i += 0.1; %>
                        <% }); %>
                    </tbody>
                </table>

            </div>
            <!-- / Main container-->
            <!-- Footer-->
            <% include partials/footer %>
                <!-- /.Footer-->
                <!-- SCRIPTS-->
                <!-- JQuery-->
                <script type="text/javascript" src="js/jquery-3.2.1.min.js"></script>
                <!-- Bootstrap dropdown-->
                <script type="text/javascript" src="js/popper.min.js"></script>
                <!-- Bootstrap core JavaScript-->
                <script type="text/javascript" src="js/bootstrap.min.js"></script>
                <!-- MDB core JavaScript-->
                <script type="text/javascript" src="js/mdb.min.js"></script>
                <!-- Animations init-->
                <script>
                    new WOW().init();
                </script>

                <script>
                    window.onload = function () {

                        const form = document.getElementById("problem-form");

                        form.onsubmit = function () {

                            const data = {
                                author: form.ifauthor.value,
                                name: form.ifname.value,
                                tag: form.iftag.value,
                                desc: form.ifdesc.value
                            };

                            var xhr = new XMLHttpRequest();
                            var url = "http://localhost/api/v1/servers/371762864790306817/reports";
                            xhr.open("POST", url, true);
                            xhr.setRequestHeader("Content-type", "application/json");
                            xhr.send(JSON.stringify(data));

                            //return false;
                        }
                    }
                </script>

</body>

</html>